## 算法介绍与流程
RC4（Rivest Cipher 4）是一种流密码算法，由Ron Rivest在1987年设计。RC4算法广泛应用于各种安全协议中，如SSL/TLS和WEP。算法的主要优点是简单和高效，但近年来，已经发现了一些安全漏洞。以下是RC4流密码算法的具体实现流程：

#### 密钥初始化（KSA，Key Scheduling Algorithm）：
RC4使用一个可变长度的密钥，通常长度在40到256比特之间。KSA算法用于将密钥扩展为一个256字节的状态向量S。实现过程如下：
1. 用0到255的整数初始化S向量：S[i] = i，其中i为0到255之间的整数。
2. 使用输入密钥K对S向量进行置换。首先，用密钥K初始化一个256字节的临时向量T。如果密钥长度为L，则重复填充K直至填满T向量。
3. 置换S向量：用j记录当前置换位置，初始化为0。然后遍历S向量的每个元素S[i]，并执行以下操作：
    - j = (j + S[i] + T[i]) mod 256
    - 交换S[i]与S[j]

#### 生成密钥流（PRGA，Pseudo-Random Generation Algorithm）：
使用初始化后的状态向量S生成密钥流。密钥流的长度与待加密消息长度相同。PRGA算法的实现步骤如下：
1. 初始化i和j为0。
2. 对于每一个字节的消息，执行以下操作：
    - i = (i + 1) mod 256
    - j = (j + S[i]) mod 256
    - 交换S[i]与S[j]
    - 计算t = (S[i] + S[j]) mod 256
    - 生成密钥流字节Ks：Ks = S[t]

#### 加密/解密：
将生成的密钥流Ks与待加密/解密的消息进行异或操作，得到加密/解密后的结果。例如，如果明文消息为M，则密文消息C可以通过如下公式计算：
	$C=M \oplus Ks$
同样地，已知密文消息C，可以使用相同的密钥流Ks进行解密，得到原始明文消息M：
	$M=C \oplus Ks$

需要注意的是，虽然RC4曾被广泛使用，但是近年来已经发现了一些安全漏洞。因此，如今推荐使用更安全的密码算法，如ChaCha20或AES。